!function(a,b){"use strict";var c=function(d){var e=this,f=d.childNodes,g=null,h=null,i=[],j=0,k=0,l=0,m=0,n=0;for(e.events={tiltHandler:function(a){a.preventDefault(),e.animate.stop().tilt(this)},flipHandler:function(){b.removeEventListener("mouseup",e.events.flipHandler),e.animate.stop().flip(g,e.animate._flipEnergy())},dropHandler:function(){h=i[i.indexOf(g)+1===i.length?0:i.indexOf(g)+1],e.animate.stop().zIndex(g,1).zIndex(h,2).drop(h).reset(g,100),g=h}},e.animate={id:0,stop:function(){return e.animate.id&&a.cancelAnimationFrame(e.animate.id),this},reset:function(a,b){return setTimeout(function(){c.matrix3d.reset(a)},b),this},zIndex:function(a,b){return c.matrix3d.zIndex(a,b),this},tilt:function(d,f,g){var h=d,i=f||0,k=600,m=.15,n=g||{},o=[],p=n.initialMatrix||c.matrix3d.getComputedMatrix(h),q=n.rY||c.matrix3d.baseMatrix.slice(0),r=e.animate._easeOut(i/k,6)*Math.PI*m,s=new CustomEvent("tiltComplete");return j=0===i?(new Date).getTime():j,b.addEventListener("mouseup",e.events.flipHandler,!1),q[0]=Math.cos(r),q[2]=-Math.sin(r),q[8]=Math.sin(r),q[10]=Math.cos(r),o=c.matrix3d.x(p,q),k>=i?(e.animate._setFrame(h,o),l=e.animate._easeOut(i/k)*m,i+=1,e.animate.id=a.requestAnimationFrame(function(){e.animate.tilt(h,i,{initialMatrix:p,rY:q})})):(a.cancelAnimationFrame(e.animate.id),h.dispatchEvent(s)),this},flip:function(b,d,f,g){var h=b,i=f||0,j=g||{},k=[],m=j.initialMatrix||c.matrix3d.getComputedMatrix(h),n=j.rY||c.matrix3d.baseMatrix.slice(0),o=e.animate._easeOut(i/d.duration,3)*Math.PI*(d.rotation+l),p=new CustomEvent("flipComplete");return n[0]=Math.cos(o),n[2]=Math.sin(o),n[8]=-Math.sin(o),n[10]=Math.cos(o),k=c.matrix3d.x(m,n),d.duration>=i?(e.animate._setFrame(h,k),i+=1,e.animate.id=a.requestAnimationFrame(function(){e.animate.flip(h,d,i,{initialMatrix:m,rY:n})})):(a.cancelAnimationFrame(e.animate.id),h.dispatchEvent(p)),this},drop:function(b,d,f){var g=b,h=d||0,i=100,j=f||{},k=[],l=j.initialMatrix||c.matrix3d.getComputedMatrix(g),m=j.tZ||c.matrix3d.baseMatrix.slice(0);return m[15]=-e.animate._easeOutElastic(h/i),k=c.matrix3d.x(l,m),1>=h/i?(e.animate._setFrame(g,k),h+=1,e.animate.id=a.requestAnimationFrame(function(){e.animate.drop(g,h,{initialMatrix:l,tZ:m})})):(k[15]=1,e.animate._setFrame(g,k),a.cancelAnimationFrame(e.animate.id)),this},_flipEnergy:function(){var a=0,b=0,c={};return k=(new Date).getTime(),a=k-j,b=a/1e4,c.duration=Math.floor(180*b+60),c.rotation=Math.floor(31*b)%2===1?Math.floor(31*b):Math.floor(31*b)+1,c},_easeOut:function(a,b){var c=b||3;return Math.pow(a,1/c)},_easeOutElastic:function(a){return Math.pow(2,-10*a)*Math.sin(2*(a-.075)*Math.PI/.3)+1},_setFrame:function(a,b){var c="matrix3d("+b+")";a.style["-webkit-transform"]=c,a.style["-moz-transform"]=c,a.style["-o-transform"]=c,a.style["-ms-transform"]=c,a.style.transform=c}},m=0,n=f.length;n>m;m++)"#text"!==f[m].nodeName&&i.push(f[m]);for(g=i[0],e.animate.zIndex(g,1).drop(g),m=0,n=i.length;n>m;m++)i[m].addEventListener("mousedown",e.events.tiltHandler,!1),i[m].addEventListener("flipComplete",e.events.dropHandler,!1)};c.matrix3d={baseMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],reset:function(a){a.style["-webkit-transform"]=null,a.style["-moz-transform"]=null,a.style["-o-transform"]=null,a.style["-ms-transform"]=null,a.style.transform=null,a.style.zIndex=null},zIndex:function(a,b){a.style.zIndex=b},getComputedMatrix:function(b){var d=a.getComputedStyle(b),e=d.transform||d["-webkit-transform"]||d["-moz-transform"]||d["-o-transform"]||d["-ms-transform"],f=e.length;if("matrix3d"===e.substr(0,8)){e=e.substr(8).replace(/[\(\)]/g,"").split(",");for(var g=0;f>g;g++)e[g]=+e[g]}else if("matrix("===e.substr(0,7)){e=e.substr(6).replace(/[\(\)]/g,"").split(",");for(var h=0;f>h;h++)e[h]=+e[h];e=[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}else e=c.matrix3d.baseMatrix.slice(0);return e},translateOrigin:function(b,c,d){var e=b,f={},g="",h=a.getComputedStyle(e);f.string=h["transform-origin"]||h.transformOrigin||h["-webkit-transform-origin"]||h["-moz-transform-origin"]||h["-o-transform-origin"]||h["-ms-transform-origin"],f.array=f.string.split(" "),f.x=+f.array[0].substr(0,f.array[0].length-2),f.y=+f.array[1].substr(0,f.array[1].length-2),g=f.x+c+"px "+(f.y+d)+"px",e.style["-webkit-transform-origin"]=g,e.style["-moz-transform-origin"]=g,e.style["-o-transform-origin"]=g,e.style["-ms-transform-origin"]=g,e.style["transform-origin"]=g,e.style.transformOrigin=g},x:function(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]]}},"complete"===b.readyState?new c(b.getElementById("slider")):a.addEventListener("load",function(){new c(b.getElementById("slider"))},!1)}(this,document);