!function(a,b){"use strict";var c=function(d){var e=this,f=d,g=f.childNodes,h=null,i=null,j=[],k="",l=0,m=0,n=0,o=0,p=0;for(e.events={tiltHandler:function(a){a.preventDefault(),e.animate.stop().tilt(this)},flipHandler:function(){b.removeEventListener("mouseup",e.events.flipHandler),e.animate.stop().flip(h,e.animate._flipEnergy())},dropHandler:function(){i=j[j.indexOf(h)+1===j.length?0:j.indexOf(h)+1],e.animate.stop().zIndex(h,1).zIndex(i,2).drop(i).reset(h,100),h=i},perspectiveHandler:function(){e.animate._addPerspective()}},e.animate={id:0,stop:function(){return e.animate.id&&a.cancelAnimationFrame(e.animate.id),this},reset:function(a,b){return setTimeout(function(){c.matrix3d.reset(a),e.animate._removeShadow(a)},b),this},zIndex:function(a,b){return c.matrix3d.zIndex(a,b),this},tilt:function(d,f,g){var h=d,i=f||0,j=600,m=.15,o=g||{},p=[],q=o.initialMatrix||c.matrix3d.getComputedMatrix(h),r=o.rY||c.matrix3d.baseMatrix.slice(0),s=e.animate._easeOut(i/j,6)*Math.PI*m,t=new CustomEvent("tiltComplete");return k="tilt",l=0===i?(new Date).getTime():l,b.addEventListener("mouseup",e.events.flipHandler,!1),r[0]=Math.cos(s),r[2]=-Math.sin(s),r[8]=Math.sin(s),r[10]=Math.cos(s),p=c.matrix3d.x(q,r),j>=i?(n=e.animate._easeOut(i/j)*m,e.animate._setFrame(h,p,n),i+=1,e.animate.id=a.requestAnimationFrame(function(){e.animate.tilt(h,i,{initialMatrix:q,rY:r})})):(a.cancelAnimationFrame(e.animate.id),h.dispatchEvent(t)),this},flip:function(b,d,f,g){var h=b,i=f||0,j=g||{},l=[],m=j.initialMatrix||c.matrix3d.getComputedMatrix(h),o=j.rY||c.matrix3d.baseMatrix.slice(0),p=e.animate._easeOut(i/d.duration,3)*Math.PI*(d.rotation+n),q=new CustomEvent("flipComplete");return k="flip",o[0]=Math.cos(p),o[2]=Math.sin(p),o[8]=-Math.sin(p),o[10]=Math.cos(p),l=c.matrix3d.x(m,o),d.duration>=i?(i+1>d.duration&&e.animate._losePerspective(),e.animate._setFrame(h,l,e.animate._easeOut(i/d.duration)*d.rotation),i+=1,e.animate.id=a.requestAnimationFrame(function(){e.animate.flip(h,d,i,{initialMatrix:m,rY:o})})):(a.cancelAnimationFrame(e.animate.id),h.dispatchEvent(q)),this},drop:function(b,d,f){var g=b,h=d||0,i=100,j=f||{},l=[],m=j.initialMatrix||c.matrix3d.getComputedMatrix(g),n=j.tZ||c.matrix3d.baseMatrix.slice(0),o=new CustomEvent("dropComplete");return n[15]=-e.animate._easeOutElastic(h/i),l=c.matrix3d.x(m,n),k="drop",1>=h/i?(e.animate._setFrame(g,l),h+=1,e.animate.id=a.requestAnimationFrame(function(){e.animate.drop(g,h,{initialMatrix:m,tZ:n})})):(l[15]=1,e.animate._setFrame(g,l),a.cancelAnimationFrame(e.animate.id),g.dispatchEvent(o)),this},_flipEnergy:function(){var a=0,b=0,c={};return m=(new Date).getTime(),a=m-l,b=21*Math.pow(n/.15,2),c.duration=1e3>a?60:Math.floor(.06*a),c.rotation=Math.floor(b)%2===1?Math.floor(b):Math.floor(b)+1,c},_easeOut:function(a,b){var c=b||3;return Math.pow(a,1/c)},_easeOutElastic:function(a){return Math.pow(2,-10*a)*Math.sin(2*(a-.075)*Math.PI/.3)+1},_setShadow:function(a,b){var c="",d=0,e=0,f=0;d=Math.floor(b),c=d%2===0&&"flip"===k?"right":"left",e=b-d,f=.5>e?e:1-e,a.setAttribute("data-shadow",c+"-"+Math.round(100*f))},_removeShadow:function(a){a.removeAttribute("data-shadow")},_addPerspective:function(){f.style["-webkit-perspective"]="2000px",f.style["-moz-perspective"]="2000px",f.style["-o-perspective"]="2000px",f.style["-ms-perspective"]="2000px",f.style.perspective="2000px"},_losePerspective:function(){f.style["-webkit-perspective"]=null,f.style["-moz-perspective"]=null,f.style["-o-perspective"]=null,f.style["-ms-perspective"]=null,f.style.perspective=null,f.style.cssText||f.removeAttribute("style")},_setFrame:function(a,b,c){var d="matrix3d("+b+")";a.style["-webkit-transform"]=d,a.style["-moz-transform"]=d,a.style["-o-transform"]=d,a.style["-ms-transform"]=d,a.style.transform=d,c&&e.animate._setShadow(a,c)}},e.shadowCSS=function(){var a=b.createElement("style"),c="",d=["left","right"],e=0,f=0;for(o=0,p=d.length;p>o;o++)for(e=0,f=50;f>e;e++)c+='.slide[data-shadow="'+d[o]+"-"+e+'"]:before{',c+="background: -webkit-linear-gradient("+d[o]+", rgba(255,255,255,0) "+(100-1.5*e)+"%, rgba(0,0,0,0.3) "+(120-1.5*e)+"%);",c+="background: -moz-linear-gradient("+d[o]+", rgba(255,255,255,0) "+(100-1.5*e)+"%, rgba(0,0,0,0.3) "+(120-1.5*e)+"%);",c+="background: -o-linear-gradient("+d[o]+", rgba(255,255,255,0) "+(100-1.5*e)+"%, rgba(0,0,0,0.3) "+(120-1.5*e)+"%);",c+="background: -ms-linear-gradient("+d[o]+", rgba(255,255,255,0) "+(100-1.5*e)+"%, rgba(0,0,0,0.3) "+(120-1.5*e)+"%);",c+="background: linear-gradient(to "+d[+!o]+", rgba(255,255,255,0) "+(100-1.5*e)+"%, rgba(0,0,0,0.3) "+(120-1.5*e)+"%);",c+="}";a.insertBefore(b.createTextNode(c),null),b.head.insertBefore(a,null)},e.shadowCSS(),o=0,p=g.length;p>o;o++)"#text"!==g[o].nodeName&&j.push(g[o]);for(h=j[0],e.animate.zIndex(h,1).drop(h),o=0,p=j.length;p>o;o++)j[o].addEventListener("mousedown",e.events.tiltHandler,!1),j[o].addEventListener("flipComplete",e.events.dropHandler,!1),j[o].addEventListener("dropComplete",e.events.perspectiveHandler,!1)};c.matrix3d={baseMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],reset:function(a){a.style["-webkit-transform"]=null,a.style["-moz-transform"]=null,a.style["-o-transform"]=null,a.style["-ms-transform"]=null,a.style.transform=null,a.style.zIndex=null,a.style.cssText||a.removeAttribute("style")},zIndex:function(a,b){a.style.zIndex=b},getComputedMatrix:function(b){var d=a.getComputedStyle(b),e=d.transform||d["-webkit-transform"]||d["-moz-transform"]||d["-o-transform"]||d["-ms-transform"],f=e.length;if("matrix3d"===e.substr(0,8)){e=e.substr(8).replace(/[\(\)]/g,"").split(",");for(var g=0;f>g;g++)e[g]=+e[g]}else if("matrix("===e.substr(0,7)){e=e.substr(6).replace(/[\(\)]/g,"").split(",");for(var h=0;f>h;h++)e[h]=+e[h];e=[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}else e=c.matrix3d.baseMatrix.slice(0);return e},translateOrigin:function(b,c,d){var e=b,f={},g="",h=a.getComputedStyle(e);f.string=h["transform-origin"]||h.transformOrigin||h["-webkit-transform-origin"]||h["-moz-transform-origin"]||h["-o-transform-origin"]||h["-ms-transform-origin"],f.array=f.string.split(" "),f.x=+f.array[0].substr(0,f.array[0].length-2),f.y=+f.array[1].substr(0,f.array[1].length-2),g=f.x+c+"px "+(f.y+d)+"px",e.style["-webkit-transform-origin"]=g,e.style["-moz-transform-origin"]=g,e.style["-o-transform-origin"]=g,e.style["-ms-transform-origin"]=g,e.style["transform-origin"]=g,e.style.transformOrigin=g},x:function(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]]}},"complete"===b.readyState?new c(b.getElementById("slider")):a.addEventListener("load",function(){new c(b.getElementById("slider"))},!1)}(this,document);